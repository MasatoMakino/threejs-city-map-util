(()=>{"use strict";var t,e={240:(t,e,n)=>{var r=n(71);class a{constructor(t=0,e=0){this.lat=0,this.lng=0,this.lat=t,this.lng=e}clone(){return new a(this.lat,this.lng)}}const o=1/60*40,i=o/8/10,s=.0125;function c(t,e,n,r,a,i=0){const s=n+(r-n)/2,c=e.slice(n,s),u=e.slice(s,r);""!==c&&""!==u&&(t.lat+=Number(c)*o*a,t.lng+=Number(u)*a+i)}function u(t,e,n){if(""===n)return;const r=Number(n);r<1||r>4||(t.lat+=r>2?i*e:0,t.lng+=r%2==0?s*e:0)}var l=n(815);function h(t,e){const n=function(t,e){const n=t*Math.PI/180,r=[1.0000007049454078,-.0025188297041239312,26435429493240994e-22,-3.4526259073074147e-9,4891830424387949e-27,-7228726045813916e-30];let a=0;for(let t=1;t<=5;t++)a+=r[t]*Math.sin(2*t*n);const o=6366807.912604471;return[t,e,o*(r[0]*n+a),o*r[0]]}(e.lat,e.lng),a=function(t,e,n){n[0];const r=n[1],a=n[2],o=n[3];function i(t){return t*Math.PI/180}const s=.08181919104281579,c=[0,.0008377318247285465,7.608527848379248e-7,1.1976455002315586e-9,24291502606542468e-28,5750164384091974e-30],u=i(t),l=i(e)-i(r),h=Math.cos(l),f=Math.sin(l),d=Math.sinh(Math.atanh(Math.sin(u))-s*Math.atanh(s*Math.sin(u))),p=Math.sqrt(1+d*d),w=Math.atan(d/h),v=Math.atanh(f/p);let b=0,m=0;const y=Math.sqrt(1+d*d);let M=0,g=0;for(let t=1;t<=5;t++){const e=2*t*w,n=2*t*v;b+=c[t]*Math.sin(e)*Math.cosh(n),m+=c[t]*Math.cos(e)*Math.sinh(n);const r=2*t*c[t];M+=r*Math.cos(e)*Math.cosh(n),g+=r*Math.sin(e)*Math.sinh(n)}M+=1;const _=[0,0,0,0];_[0]=o*(w+b)-a,_[1]=o*(v+m);const x=Math.tanh((g*y*h+M*d*f)/(M*y*h-g*d*f)),P=.9966471893188177*Math.tan(u),O=o/6378137*Math.sqrt((M*M+g*g)/(d*d+h*h)*(1+P*P));return _[2]=180*-x/Math.PI,_[3]=O,_}(t.lat,t.lng,n);return new r.Pa4(a[1],0,-a[0])}function f(t,e){const n=t.match(e);if(n)return Number(n[1])}async function d(t,e){const n=await fetch(t),r=await n.text(),o=function(t){const e=t.match(/(\d+)_[\w]+_\d+\.[a-z]+$/);if(null!=e)return e[1]}(t),i=function(t){if(null==t||!function(t){if(null==t)return!1;if(Number.isNaN(Number(t)))return console.warn("メッシュコードが10進数以外で指定されています。変換ができないため、undefinedを返します。"),!1;switch(t.length){case 4:case 6:case 8:case 9:case 10:break;default:return console.warn(`メッシュコードの桁数${t.length}は不正です。変換ができないため、undefinedを返します。`),!1}return!0}(t))return;const e=new a;return c(e,t,0,4,1,100),c(e,t,4,6,1/8),c(e,t,6,8,.0125),u(e,.5,t.slice(8,9)),u(e,.25,t.slice(9,10)),e}(o),s=function(t){const e=f(t,/PARAMETER\["latitude_of_origin",([\d.]+)\]/),n=f(t,/PARAMETER\["central_meridian",([\d.]+)\]/);if(e&&n)return new a(e,n)}(r),d=function(t,e){if(null!=t&&null!=e)return h(t,e)}(i,s);if(null==i||null==d)return;const p=(new l.L).parse(r).children[0];if(null==p)return;p.userData.meshCode=o,p.userData.meshCodeLatLng=i,p.userData.zone=s,p.userData.origin=e,p.geometry.translate(-d.x,d.z,0),p.geometry.rotateX(-Math.PI/2);const w=h(i,e);return p.position.add(w),p}async function p(t,e){return d(t,e)}var w=n(75),v=n(12),b=function(){function t(){var t,e,n,a,o;this.scene=new r.xsS,t=this.scene,e=new r.Mig(16777215,Math.PI/2),t.add(e),this.camera=function(t,e,n,a,o){void 0===a&&(a=.01),void 0===o&&(o=4e11);var i=new r.cPb(45,2,a,o);return i.position.set(0,0,500),i.updateMatrixWorld(!1),t.add(i),i}(this.scene),this.renderer=function(t,e,n){void 0===n&&(n={}),n=Object.assign({color:8947848},n);var a=new w.CP7({});return document.body.appendChild(a.domElement),a.setClearColor(new r.Ilk(n.color)),a.setSize(1280,640),a.setPixelRatio(window.devicePixelRatio),a}(0,0,{}),n=this.camera,(a=this.renderer)&&(o=a.domElement),new v.z(n,o).update(),function(t){var e=new r.y8_(2e3);t.add(e)}(this.scene),this.load(),this.render()}return t.prototype.load=function(){return t=this,e=void 0,o=function(){var t,e,n,o,i,s,c,u,l;return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(f){switch(f.label){case 0:return[4,p("./53393599_bldg_6677.obj",t=new a(35.6625,139.74375))];case 1:return e=f.sent(),[4,p("./53393599_dem_6677.obj",t)];case 2:return(n=f.sent())&&(o=new r.dpR,(i=o.load("./53393599_18.jpg")).colorSpace="srgb",n.material=new r.Wid({map:i}),this.scene.add(n)),e&&(e.material=new r.vBJ({color:16777215,transparent:!0,opacity:.5}),this.scene.add(e),s=new r.Kj0(new r.xo$(10,10),new r.vBJ),c=new a(35.65864183184921,139.74544075634395),u=h(c,e.userData.origin),s.position.copy(u),this.scene.add(s),(l=s.clone()).position.y=333,this.scene.add(l)),[2]}}))},new((n=void 0)||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}));var t,e,n,o},t.prototype.render=function(){var t=this;requestAnimationFrame((function(){t.render()})),this.renderer.render(this.scene,this.camera)},t}();window.onload=function(){new b}}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,r),o.exports}r.m=e,t=[],r.O=(e,n,a,o)=>{if(!n){var i=1/0;for(l=0;l<t.length;l++){for(var[n,a,o]=t[l],s=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(s=!1,o<i&&(i=o));if(s){t.splice(l--,1);var u=a();void 0!==u&&(e=u)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[n,a,o]},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={577:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var a,o,[i,s,c]=n,u=0;if(i.some((e=>0!==t[e]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(c)var l=c(r)}for(e&&e(n);u<i.length;u++)o=i[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(l)},n=self.webpackChunk_masatomakino_threejs_city_map_util=self.webpackChunk_masatomakino_threejs_city_map_util||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var a=r.O(void 0,[736],(()=>r(240)));a=r.O(a)})();